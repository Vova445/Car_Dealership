(()=>{"use strict";({386:function(){var e=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(d,l){function s(e){try{i(o.next(e))}catch(e){l(e)}}function a(e){try{i(o.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?d(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}i((o=o.apply(e,t||[])).next())}))};document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("profileIcon"),n=document.getElementById("modal-auth"),o=document.getElementById("closeModal"),d=document.getElementById("authTitle"),l=document.getElementById("authForm"),s=document.getElementById("toggleAuth"),a=document.getElementById("emailAuth"),i=document.getElementById("password"),c=document.getElementById("confirmPassword"),m=document.getElementById("username"),r=document.getElementById("usernameLabel"),u=document.getElementById("confirmPasswordLabel"),y=document.getElementById("submitButton"),g=document.getElementById("modal-profile"),v=document.getElementById("closeProfileModal"),I=document.getElementById("profileUsername"),p=document.getElementById("profileEmail"),E=document.getElementById("logoutButton"),f=()=>{null==l||l.reset()},L=(e,t)=>{I&&p&&g&&(e&&(I.textContent=e),t&&(p.textContent=t),g.classList.add("show"),document.body.classList.add("modal-open"))},h=(e,t)=>{const n=e.querySelector(t);n.classList.add("hide"),setTimeout((()=>{e.classList.remove("show"),n.classList.remove("hide"),document.body.classList.remove("modal-open")}),500)},B=()=>{g&&h(g,".modal-content-profile")};t&&n&&o&&d&&l&&s&&a&&i&&c&&m&&r&&u&&y&&g&&v&&I&&p&&E?(t.addEventListener("click",(()=>{const e=localStorage.getItem("loggedInUser");if(e){const{username:t,email:n}=JSON.parse(e);L(t,n)}else n.classList.add("show"),document.body.classList.add("modal-open"),f()})),o.addEventListener("click",(()=>{const e=null==n?void 0:n.querySelector(".modal-content-auth");e&&(e.classList.add("hide"),setTimeout((()=>{n.classList.remove("show"),e.classList.remove("hide"),document.body.classList.remove("modal-open")}),500))})),v.addEventListener("click",B),E.addEventListener("click",(()=>{localStorage.removeItem("loggedInUser"),B(),n.classList.add("show"),document.body.classList.add("modal-open")})),s.addEventListener("click",(e=>{e.preventDefault();const t=l;t.classList.add("form-hide"),setTimeout((()=>{"Registration"===d.textContent?(d.textContent="Authorization",s.textContent="Registration",y.textContent="Sign In",r.style.display="none",u.style.display="none",m.style.display="none",c.style.display="none"):(d.textContent="Registration",s.textContent="Sign In",y.textContent="Register",r.style.display="block",u.style.display="block",m.style.display="block",c.style.display="block"),t.classList.remove("form-hide"),t.classList.add("form-transition")}),500),f()})),l.addEventListener("submit",(t=>e(void 0,void 0,void 0,(function*(){t.preventDefault();const e=null==a?void 0:a.value,o=null==i?void 0:i.value,l=null==c?void 0:c.value,s=null==m?void 0:m.value;if(!e||!o||"Registration"===(null==d?void 0:d.textContent)&&(!s||o!==l))return;const r="Registration"===(null==d?void 0:d.textContent)?"/register":"/login",u="Registration"===(null==d?void 0:d.textContent)?{email:e,password:o,username:s}:{email:e,password:o};try{const t=yield fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});t.ok?(console.log("Registration"===(null==d?void 0:d.textContent)?"User registered":"User signed in"),n&&h(n,".modal-content-auth"),localStorage.setItem("loggedInUser",JSON.stringify({username:s,email:e})),L(s,e)):console.error("Error:",yield t.text())}catch(e){console.error("Network error:",e)}}))))):console.error("Some elements were not found on the page.")})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("visitBtn"),t=document.getElementById("modal-auth"),n=document.getElementById("closeModal"),o=document.getElementById("myModal"),d=document.getElementById("closeModalBtn");e&&t&&n&&o&&d?e.addEventListener("click",(()=>{if(localStorage.getItem("loggedInUser")){o.style.display="none";const e=localStorage.getItem("loggedInUser");if(e){const{username:t,email:n}=JSON.parse(e);((e,t)=>{const n=document.getElementById("modal-profile"),o=document.getElementById("profileUsername"),d=document.getElementById("profileEmail");o&&d&&n&&(e&&(o.textContent=e),t&&(d.textContent=t),n.classList.add("show"),document.body.classList.add("modal-open"))})(t,n)}}else o.style.display="none",t.classList.add("show"),document.body.classList.add("modal-open")})):console.error("Required elements not found")}))}})[386]()})();